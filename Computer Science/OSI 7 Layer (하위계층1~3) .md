
# 2023.02.14 (화)

# ✍️ What I learned Today ?

---
## ✨OSI 7계층 (1~3계층)

📌*들어가기 전에..*

OSI 7계층은 기종이 서로 다른 컴퓨터간의 정보교환을 원활히 하기 위해 국제 표준화 기구 ISO 에서 제정했다. 네트워크를 이루고 있는 구성 요소들을 계층적 구조로 나누고 각 계층의 표준을 정한 것이다.

암기법 : 응표세트네데물 (응표라는 친구가 세트장에서 내 대신 물먹었다)

네데물 : 하위계층

응표세트: 상위계층

---

#### 1. 물리계층 ( physical Layer)

컴퓨터 세상의 모든 파일과 프로그램은 0과 1의 나열이다. 즉, 0과 1을 주고받는다는 것은, 데이터를 주고받을 수 있음을 뜻한다. 그럼 두대의 컴퓨터가 통신하려면? 말그대로, 0과 1을 주고받을 수 있으면 된다.
두대의 컴퓨터를 전선으로 연결한다고 가정해보자.
1을 보낼 때는 +5V의 전기를 전선으로 흘려보내고 0을 보낼때는 -5v의 전기를 전선으로 흘려보내면 0과1의 전송이 가능 할 것이다.


즉, 0과 1을 주고받을 수 있으니 두 컴퓨터는 모든 데이터를 주고 받을 수 있을 것이다.

**그러나**.. 이론과 실제는 다른법! 

전선은 모든 주파수를 통과시킬수 없다. 

예를들어 5에서 8 헤르츠만 통과시킬수 있는 전선으로 주파수 최소값이 1, 최대가 10인 전자기파를 전달하면, 결과적으로 통과시킬수 없는 주파수는 상실되고 5-8 헤르츠의 주파수만 전송되어 보냈던 데이터와는 전혀 다른 엉뚱한 신호를 받게 된다.

![수평수직전자기파](/img/%EC%88%98%ED%8F%89%EC%88%98%EC%A7%81%EC%A0%84%EC%9E%90%EA%B8%B0%ED%8C%8C.png)

이론에서 말한대로, 0과 1을 전송하려면 위와 같은 전자기파가 발생한다. 그러나 수직선과 수평선이 있는 전자기파는 항상 0 에서 무한대의 주파수 범위를 가진다.
그리고 그런 주파수를 전달할수 있는 전선은 **세상에 없다.**

따라서, 신호를 전송하기 위해서는 아날로그 신호로 변환 해야한다.
여기서 그 역할을 하는 계층이 바로 Physical Layer 이다.

Physical Layer란, 0과 1의 나열을 아날로그 신호로 바꾸어 전선으로 흘려 보내고 (encoding), 아날로그 신호가 들어오면 이것을 0과 1의 나열인 데이터로 변환 해준다(decoding). 이런 과정을 통해 Physical Layer는 물리적으로 연결된 두대의 컴퓨터가 0과 1의 나열을 주고받을 수 있게 해준다.


- Physical Layout은 PHY칩에 **하드웨어적**으로 구현되어 있다.

---

#### 2. 데이터 링크 계층(Data Link Layer)

📌*들어가기 전.. 배경지식 :* 

여러대의 컴퓨터 간의 통신 : 다중 통신을 할때, 그 모든 컴퓨터를 전선으로 연결하기에는 현실적으로, 불가능! 따라서 전선 하나로 여러대의 컴퓨터와 통신할 방법을 모색해야한다.

**키워드 : 허브, 라우터,인터넷**


![허브설명.jpg](/img/%ED%97%88%EB%B8%8C%EC%84%A4%EB%AA%85.jpg)

허브는 가까운 거리의 컴퓨터를 연결하는 장치로, 각 회선을 통합적으로 관리하며 신호 증폭 기능을 하는 리피터의 역할도 포함한다. 더미허브와 스위칭 허브가 있다.

* 더미허브 : 네트워크에 흐르는 모든 데이터를 단순 연결 , LAN이 보유한 대역폭을 나누어 제공

* 스위칭 허브: 네트워크상에 흐르는 데이터의 유무 및 흐름을 제어하여 각각의 노드가 허브의 최대 대역폭을 사용 할 수 있는 지능형 허브(똑똑한 허브!)

만약, 허브로 연결된 여러대의 컴퓨터가 있지만 나는 단 한대의 컴퓨터에만 데이터를 전송하고 싶다고 가정해보자. 데이터를 허브로 보내야하는데, 다른 컴퓨터도 허브에 연결이 되어있기 때문에, 데이터가 다른 컴퓨터에도 공공으로 전송되게 된다. 그럼 ___허브를 똑똑하게 만들어서, 메시지의 목적을 확인해서 원하는 한대의 컴퓨터에게만 전달해줄수 있다면?___ 그것이 <mark>스위칭 허브</mark>이다.

그리고 허브끼리 연결을 해주어서, 서로 다른 허브에 연결된 컴퓨터끼리 데이터 통신을 할 수 있게 해주는것을 <mark>라우터</mark> 라고 한다.

허브와 허브를 연결한것은 라우터, 그럼 또 라우터끼리 연결하기 위해서 제3의 라우터를 설치하고..또 그걸 라우터로 연결하고 .. 확장해서, 전 세계의 컴퓨터들을 연결한 것이 바로 인터넷이다. (해저광케이블)

 

> 가끔 상어가 해저케이블을 물어뜯어서 고장이 날때도 있음. 심해에는 어떻게 깔았냐고? 커다란 배가 지나가면서 케이블 만들어서 바다에 던져놓고간다.
> 

다시, Data-link Layer 설명으로 돌아가서,

위와같이, 스위칭 허브를 통해서 데이터를 전송받는데 까진 성공했을때, 한가지 문제가 더 남아있다. 여러대의 컴퓨터가 동시에 한 컴퓨터로 데이터를 전송하면 어떻게 될까? 데이터는 0과 1로 이루어져있는데, 이 데이터들이 컴퓨터로 도착하면 01011010110010으로 연속적으로 들어오게 될텐데, 어떻게 끊어서 해석을 해야한단 말이야?

→ 이 문제를 해결하기 위해, 송신자가 데이터의 앞 뒤에, 약속된 특별한 비트열을 붙인다. 예를들어 시작비트열이 1111, 종료비트열이 0000이라고 한다면  

**1111**0101**00001111**0011**0000 → 여기서 데이터는? 0101과 0011 이다**

이렇게 prefix와 suffix로 비트열을 붙이는 작업을 <mark>Framing</mark>이라고 한다.

즉, Data-link Layer는 같은 네트워크에 있는 여러대의 컴퓨터들이 데이터를 주고받기 위해서 필요한 모듈이다.

- Data-link Layer는 랜카드에 **하드웨어적**으로 구현 되어있다.

---

#### 3. 네트워크 계층 (Network Layer)

📌*들어가기 전.. 배경지식 :* 

 데이터를 다른 네트워크의 컴퓨터로 보내려면,  인터넷에 연결된 컴퓨터의 고유 주소값인 ip를 알아야한다. ip는 사람이 이해하기 어렵기 때문에, 우리는 이 주소를 기억하고 활용하기 위해 쉬운 문자형태로 변환해서 사용하는데, 흔히 아는 www.naver.com과 같은것을 에로 들 수 있다.
(도메인 네임을 ip 주소로 변환하는 역할을 하는 시스템을 DNS라고 한다)
DNS와 DNS 서버 덕분에 우리는 도메인 주소를 알면 해당 컴퓨터의 ip 주소, 즉 주소를 알수있고 그 주소로 데이터를 보낼 수 있게 되는 것이다.

  * 

앞서, 1형, 2형 레이어를 설명 한 것처럼, 컴퓨터끼리 데이터를 주고받을때에는 
서로 ‘연결’ 되어있어야  한다.  전 세계의 모든 컴퓨터를 전선으로 연결 할 수 없으니, 우리는 허브,라우터 등을 통해 네트워크 연결을 관리하고 있는데, Physical Layer에서는 단일 컴퓨터간의 정보 전달, Data-link Layer에서는 서로 같은 네트워크를 가진 컴퓨터끼리의 정보 전달을 다뤘다면, 3형 Network Layer에서는 서로 다른 네트워크에 있는 컴퓨터끼리 정보전달을 할 경우를 다룬다.


  **키워드 : 패킷(데이터 단위),라우터**

> `패킷 packet` : a small, thin package. 
> 네트워크를 통해 전송하기 쉽도록 자른 데이터의 전송 단위. 패키지(소포)와 버킷의 합성어이다. 데이터 전송에서 송신측과 수신측에 의하여 하나의 단위로 취급되어 전송되는 집합체이다. 헤더와 데이터, 테레일러로 이루어져 있으며, 헤더에서는 데이터가 전달될 주소와 순서등이 기록되고, 테레일러에는 에러 정보가 기록된다.


> `라우터` 서로 다른 네트워크를 중계해주는 장치로, 보내지는 송신정보에서 수신처 주소를 읽어 가장 적절한 통신 통로를 지정하고 다른 통신망으로 전송하는 장치를 말한다.


네트워크 레이어는, 수많은 네트워크들의 연결로 이루어진 inter-network 속에서 어딘가에 있는 목적지 컴퓨터로 데이터를 전송하기 위한 모듈이다.

2단계(Data link Layer)를 거쳐서 온 데이터에 어디로 가야하는지, 목적지의 ip주소를 붙여, 하나의 패킷으로 만드는 과정이다. 패킷으로 패키징이 된 데이터는 encoding과 decoding을 반복하며 전달되어야 할 주소로 이동하는데, 이것을 가능하게 해주는 것이 바로 라우터 이다!

즉, 패킷에 들어있는 ip 주소를 읽고 어디로 전달해야할지 라우터가 구분해서 넘겨준다고 보면 된다.



* Network Layer 는 운영체제의 커널에 **소프트웨어** 적으로 구현되어 있다.


---

#### <1계층~3계층 정리>

* 내 컴퓨터에서, 다른 네트워크에 연결된 아무개 컴퓨터로 데이터를 보내는 상황



  * 데이터를 보내는 컴퓨터에서, 데이터를 패킷으로 변환한다.(3계층) 그리고 패킷에 Framing 작업을 해서 데이터의 시작과 끝을 구분할 수 있게 한다 (2계층). 그리고 그것을 아날로그 신호로 변환해서 전선을 타고 넘어가 인접한 라우터에 넘어간다.

  * 1계층 디코더에서 아날로그 신호를 받는다. 그것이 0과 1로 해석이 된다. 그리고 2계층 디코더로 넘어가서 시작점과 끝점의 비트열을 제거하고 3계층 디코더로 넘어가서, 패킷을 해제한다.

  * 패킷을 해제한 데이터를 다시 인접한 라우터에서 받아 읽고 다시 패킷으로 만든다. 2계층에서 prefix와 suffix를 붙인다. 1계층에서 아날로그 신호로 만들어서 전달한다

  * 원하는 주소에 도착할때 까지 반복한다.


